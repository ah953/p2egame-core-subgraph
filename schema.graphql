# Events
type ChannelAlchemicaEvent @entity {
  id: ID!
  block: BigInt!
  timestamp: BigInt!

  gotchi: Gotchi!
  parcel: Parcel!

  alchemica: [BigInt!]!
  spilloverRate: BigInt!
  spilloverRadius: BigInt!

  transaction: Bytes
}

type EquipInstallationEvent @entity {
  id: ID!
  block: BigInt!
  timestamp: BigInt!
  transaction: Bytes

  parcel: Parcel!
  installationId: BigInt!

  x: BigInt!
  y: BigInt!
}

type UnequipInstallationEvent @entity {
  id: ID!
  block: BigInt!
  timestamp: BigInt!
  transaction: Bytes

  parcel: Parcel!
  installationId: BigInt!

  x: BigInt!
  y: BigInt!
}

type InstallationUpgradedEvent @entity {
  id: ID!
  block: BigInt!
  timestamp: BigInt!
  transaction: Bytes

  parcel: Parcel!
  prevInstallationId: BigInt!
  nextInstallationId: BigInt!

  x: BigInt!
  y: BigInt!
}

# Custom Entities
type ParcelInstallation @entity {
  id: ID!
  installationId: BigInt!
  parcel: Parcel!
}

type Parcel @entity {
  id: ID!
  equippedInstallations: [ParcelInstallation!]! @derivedFrom(field: "parcel")
  lastChanneledAlchemica: BigInt
}

type Gotchi @entity {
  id: ID!
  lastChanneledAlchemica: BigInt
}

type Stat @entity {
  id: ID!
  countChannelAlchemicaEvents: BigInt!
  countParcelInstallations: BigInt!
}
